<ion-modal-view class="activity">
    <div class="header min-size">
        <ion-header-bar align-title="center">
            <button class="button button-clear" ng-click="vm.close('activityDetails')">Close</button>
            <h1 class="title">Activity Details</h1>
            <button class="button button-clear" ng-click="vm.likeActivity()">Like Post</button>
        </ion-header-bar>
    </div>
    <ion-pane class="pane has-footer">
        <ion-scroll>
            <ion-item class="item">
                <div class="ico ico-avatar"></div>
                <div class="activity-item">
                    <div class="top">
                        <div class="time" ng-if="vm.entry.created"><i class="ico ico-timesmall"></i>{{vm.entry.created | date:'mediumDate'}}</div>
                        <div class="message">
                            <a class="user-link" ng-click="$event.stopPropagation()" 
                                ui-sref="account.profile.user({userId: entry.user.id})">
                                <strong>{{vm.entry.user.displayName}}</strong>
                            </a>
                            {{ vm.entry.title }}
                            <div class="message">{{ vm.entry.message }}</div>
                        </div>
                        <span ng-if="!!vm.entry.milesTraveled">
                        <i class="ico ico-milestraveledsmall"></i>
                        <strong class="title">{{ vm.entry.milesTraveled}}</strong>
                        </span>
                        <span ng-if="!!vm.entry.likes" ng-click="vm.likeActivity()">
                            <i class="ico ico-likessmall"></i>
                            <strong class="title">{{ vm.entry.likes.length }} likes</strong>
                        </span>
                    </div>
                </div>
            </ion-item>

            <div class="map" ng-if="!!vm.entry.location.coordinates">
                <div id="map" data-tap-disabled="true"></div>
            </div>

            <div class="item-detail">
                <strong>Distance since last check in:</strong> <span ng-if="!!vm.entry.props.slMiles">{{vm.entry.props.slMiles}} miles</span>
            </div>
            <div class="item-detail">
                <strong>Freight hauled:</strong> <span>{{vm.entry.props.freight}}</span>
            </div>

            <div class="item-detail ">
                <strong>Comments:</strong>
            </div>

            <div class="item comment" ng-repeat="message in vm.comments">
               <a>{{message.sender.displayName}}</a> {{message.text}} at {{message.created | date : 'short'}}
            </div>
        </ion-scroll>
    </ion-pane>

    <ion-footer-bar ng-if="!vm.isInputVisible">
        <div class="button-bar action-buttons">
            <button class="button icon ion-ios-plus-outline primary" ng-click="vm.showInputs()"> comment</button>
        </div>
    </ion-footer-bar>

    <ion-footer-bar ng-if="vm.isInputVisible">
        <label class="item-input-wrapper">
            <textarea placeholder="message" ng-model="vm.message"></textarea>
        </label>
        <button class="button button-positive" ng-click="vm.createComment()">Send</button>
    </ion-footer-bar>

</ion-modal-view>
