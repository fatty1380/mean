<ion-modal-view class="popover-lightbox">

    <ion-list>
        <ion-item class="item-header item-divider">
            {{vm.status | capitalize }} Application
        </ion-item>
        <ion-item class="item-icon-left item-button-right" ng-if="vm.status !== 'valid'" ng-repeat="validator in vm.validators">
            <i class="icon" ng-show="validator.status === 'loading'">
                <ion-spinner></ion-spinner>
            </i>

            <i class="icon ion-checkmark" ng-show="validator.status === 'valid'"></i>
            <i class="icon ion-alert" ng-show="validator.status === 'invalid'"></i>
            <i class="icon ion-close" ng-show="validator.status === 'failed'"></i>
            <span>Validating {{validator.name}}</span>

            <button type="button" class="button button-positive" ng-if="validator.action" ng-click="validator.action()">
                Fix
            </button>
        </ion-item>

        <ion-item class="item-icon-center" ng-if="vm.status !== 'valid' && vm.status !== 'invalid'">
            <button type="button" ng-click="vm.cancelModal(vm.status)" class="button button-dark button-block">cancel</button>
        </ion-item>

        <ion-item class="item-icon-center" ng-if="vm.status === 'valid'">
            <i class="icon icon-xl ion-checkmark-circled button-positive"></i>
        </ion-item>

        <ion-item class="item-message item-footer" ng-if="vm.status === 'invalid'">
            Sorry, we are unable to complete your application at this time.
            <button type="button" ng-click="vm.cancelModal(vm.status)" class="button button-dark button-block">OK</button>
        </ion-item>

        <ion-item class="item-message item-footer" ng-if="vm.status === 'valid'">
            <span ng-bind-html="vm.text.confirm"></span>
            <br ng-if="!!vm.text.confirm" />
            <div class="row">
                <div class="col-10">
                    <button type="button" class="button button-icon icon ion-close" ng-click="vm.cancelModal(vm.status)">
                    </button>
                </div>
                <div class="col-80 col-offset-10">
                    <button type="button" class="button button-positive button-block" ng-click="vm.apply()">Apply</button>
                </div>
            </div>

        </ion-item>
    </ion-list>


</ion-modal-view>