<ion-view class="lockbox view-section min-size">

    <div class="material-action">
        <button class="button button-energized button-share" ng-click="vm.showShareModal()">
            <i class="icon ion-android-share"></i>
        </button>
    </div>
    
    <ion-header-bar align-title="center">
        <button class="button button-clear" ng-click="vm.showEditModal()"><i class="ion ion-compose"></i>
           
        </button>
        <h1 class="title">My Lockbox</h1>
        <button class="button button-clear" ng-click="vm.addDocsPopup()"><i class="ion ion-plus"></i>
           
        </button>
    </ion-header-bar>

    <div class="bar bar-subheader">
        <h3 class="title">Upload and save your documents by clicking the boxes below</h3>
    </div>

    <ion-pane class="pane content-pane">
        <ion-scroll>
            <ion-refresher pulling-text="Pull to refresh ..." on-refresh="vm.refreshDocuments()"></ion-refresher>
            <ion-list class="document-list">
                <div ng-if="vm.documents.length">
                    <div ng-repeat="doc in vm.documents track by $index | orderBy: 'url' : false">
                        <div class="row" ng-if="$even">
                            
                            <!--<div class="doc col blank" ng-if="!vm.documents[$index+1] && !vm.documents[$index].url">&nbsp;</div>-->
                            
                            <div class="doc col" 
                                 ng-class="{'stub-document': !(vm.documents[$index].url || vm.documents[$index].id), 'real-document': vm.documents[$index].url || vm.documents[$index].id}" 
                                 oset-doc-attr-view model="vm.documents[$index]" new-doc-fn="vm[vm.documents[$index].fn] || vm.newDoc">
                                <oset-doc-view model="vm.documents[$index]" new-doc-fn="vm[vm.documents[$index].fn] || vm.newDoc"></oset-doc-view>
                            </div>
                            
                            <div class="doc col" ng-if="!!vm.documents[$index+1]"
                                 ng-class="{'stub-document': !(vm.documents[$index+1].url || vm.documents[$index+1].id), 'real-document': vm.documents[$index+1].url || vm.documents[$index+1].id}" 
                                 oset-doc-attr-view model="vm.documents[$index+1]" new-doc-fn="vm[vm.documents[$index+1].fn] || vm.newDoc">
                                <oset-doc-view model="vm.documents[$index+1]" new-doc-fn="vm[vm.documents[$index+1].fn] || vm.newDoc"></oset-doc-view>
                            </div>
                            
                            <div class="doc col blank" ng-if="!vm.documents[$index+1]">&nbsp;</div>
                            
                        </div>
                    </div>
                </div>

                <div ng-if="!vm.documents.length" class="no-content">No documents</div>
            </ion-list>
        </ion-scroll>

    </ion-pane>

</ion-view>
