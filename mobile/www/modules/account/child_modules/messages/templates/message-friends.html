<ion-modal-view class="friends-screen view-section min-size" cache-view="false">

    <ion-header-bar>
        <button class="button button-clear" ng-click="vm.close();">Close</button>
        <h1 class="title">Message a friend</h1>
    </ion-header-bar>

    <ion-pane class="friends-pane">
        <div class="item item-input search-bar">
            <i class="icon light ion-ios-search-strong"></i>
            <input type="search" debounce placeholder="Search" ng-model="vm.searchText" ng-change="vm.canEdit && vm.searchHandler()">
        </div>

        <ion-scroll delegate-handle="main-content-scroll">
            <!-- Friends -->
            <div class="title" ng-if="vm.friends.length">{{vm.yourFriendsTitle}}</div>
            <ul class="list friends-list user-friends-list" ng-if="vm.friends.length">
                <li class="item" ng-repeat="friend in friends = (vm.friends | filter:vm.searchText)" ng-click="vm.viewUser(friend, $event)"
                ng-init="vm.getAvatar(friend)">
                    <img ng-if="!!(friend.avatar)" ng-src="{{friend.avatar}}" />
                    <i ng-if="!(friend.avatar)" class="ico ico-avatarsmall"></i>
                    <div class="item-content has-button-offset">
                        {{friend.displayName}}{{friend.text}}
                    </div>
                    <button class="button button-small list-button" ng-click="vm.messageFriend(friend, $event);">
                        Message
                    </button>
                </li>
                <li ng-if="vm.friends && !friends.length" class="no-matches">
                    <div class="item-content">NO MATCHES</div>
                </li>
            </ul>

            <div ng-if="!vm.friends || !vm.friends.length" class="no-content">
                <p class="message">Get started with messaging by <strong><a ng-click="vm.gotoFriends()">adding friends</a></strong> to
                    your convoy.</p>
            </div>
        </ion-scroll>
    </ion-pane>

</ion-modal-view>