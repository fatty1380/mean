<ion-view class="friends-screen">

    <div class="header min-size">
        <ion-header-bar>
            <button class="button button-clear" ng-click="$ionicGoBack()">Back</button>
            <h1 class="title">Friends</h1>
            <button class="button button-clear" ng-click="vm.showRequestsModal();">Requests</button>
        </ion-header-bar>
    </div>

    <ion-pane class="has-footer friends-pane">
        <div class="item item-input search-bar">
            <i class="icon light ion-ios-search-strong"></i>
            <input type="text" placeholder="Search for Friends" ng-model="vm.searchText" ng-change="vm.searchHandler()">
        </div>

        <ion-scroll delegate-handle="main-content-scroll">
            <div class="title">Your Friends</div>
            <ul class="list friends-list user-friends-list">
                <li class="item" ng-repeat="friend in friends = (vm.friends | filter:vm.searchText)"
                    ng-click="vm.viewUser(friend, $event)">
                    <i class="ico ico-avatar" ></i>
                    <div class="item-content">
                        {{friend.displayName}}{{friend.text}}
                    </div>
                    <button class="button button-small list-button" 
                        ng-click="vm.messageFriend(friend, $event);">
                        Message
                    </button>
                </li>
            </ul>
            <div ng-if="vm.friends.length && !friends.length" class="no-matches">
                <div class="item-content">NO MATCHES</div>
            </div>

            <div class="no-friends" ng-if="!vm.friends.length">
                <p>Start with the 5 best drivers you know and help grow your personal network of professional truck drivers.</p>
                <p>Select from your drevice contacts or manually by Mobile Phone or Email</p>

                <button class="button button-block button-small" ng-click="vm.addFriends()">Choose from Contact List</button>

                <div class="button-holder text-center" ng-if="!contacts.length">
                    <a class="button button-clear manual-add" ng-click="vm.addFriends()">
                        <i class="icon ion-ios-plus-outline"></i>
                        Add by Mobile Phone or Email
                    </a>
                </div>
            </div>

            <div class="title" ng-if="vm.searchText.length >= 2">Outset Users</div>
            <ul class="list friends-list" ng-if="vm.users.length && !contacts.length">
                <li class="item" ng-repeat="user in vm.users">
                    <i class="ico ico-avatar" ></i>
                    <div class="item-content">
                        <strong>{{user.handle}}</strong>
                        {{user.firstName}} {{user.lastName}}
                    </div>
                   <button ng-if="vm.searchText.length>0" class="button button-small list-button" ng-click="vm.addFriend(user)">Add</button>
                </li>
            </ul>
            <div ng-if="vm.searchText.length >= 2 && !vm.users.length" class="no-matches">
                <div class="item-content">No Users Found. Please, try to edit your search query.</div>
            </div>
        </ion-scroll>
    </ion-pane>

    <ion-footer-bar>
        <div class="button-bar">
            <button class="button block-button">Invite Friends</button>
        </div>
    </ion-footer-bar>

</ion-view>
