<ion-view class="friends-screen view-section">

    <ion-header-bar align-title="center" class="bar-stable">
        <button class="button button-icon icon ion-ios-arrow-back" ng-click="vm.back()"></button>
        <h1 class="title">
            <i class="app-brand"></i>
        </h1>
        <a class="button button-clear" ng-click="vm.skip();">skip</a>
    </ion-header-bar>

    <ion-content class="has-header has-footer friends-pane">
        <div class="item item-input search-bar" ng-hide="!vm.contactsResolved">
            <i class="icon light ion-ios-search-strong"></i>
            <input type="text" placeholder="Search for Friends" ng-model="vm.searchText" ng-change="vm.searchHandler()">
        </div>
        <ion-scroll delegate-handle="main-content-scroll">
            <div class="list friends-list" ng-show="vm.contacts && vm.contacts.length">
                <div class="title">Your Friends</div>
                <ion-checkbox
                    collection-repeat="contact in contacts = (vm.contacts | filter:vm.searchText)"
                    ng-model="contact.checked">
                    {{contact.displayName || contact.phone || contact.email || contact.phoneNumbers[0].value || contact.emails[0].value }}
                </ion-checkbox>
            </div>
            <div class="button-holder text-center">
                
                <button class="button button-block choose-contacts-button" 
                 ng-hide="vm.contactsResolved"
                 ng-click="vm.loadContacts()">
                 Load All Contacts
                 </button>
                
                <a class="button button-block button-clear manual-add" ui-sref="signup.friends-manually">
                    <i class="icon ion-ios-plus-outline"></i>
                    Add by Mobile Phone or Email
                </a>
            </div>
        </ion-scroll>
    </ion-content>

    <ion-footer-bar>
        <div class="button-bar">
            <button class="button block-button" ng-click="vm.sendInvitations();">Send Invitations</button>
        </div>
    </ion-footer-bar>

</ion-view>
