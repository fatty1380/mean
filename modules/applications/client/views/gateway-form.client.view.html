<div class="headline-bg headline-sm headline-map-bg headline-static">
    <div class="blue-mask container-fluid"></div>
</div>

<div class="content-section section container">

    <os-page-header title="New Job Application" class="mgn-btm pad-vert">
    </os-page-header>

    <section class="workflow-stage-form mgn-top">

        <div class="panel panel-default">
            <div class="panel-heading primary-bg">
                <div class="row">
                    <div class="col-sm-12 text-center">
                        <div class="workflow-item" ng-repeat="step in vm.activeSteps">
                            <div class="connector" ng-class="{'first': !!$first, 'last': !!$last}"></div>
                        <span class="fa-stack fa-2x step-badge" ng-class="{'active': vm.currentIndex === $index}">
                            <i class="fa fa-stack-2x fa-circle badge-bg" ng-if="!($first || $last)"></i>
                            <i class="fa fa-stack-2x {{vm.currentIndex === $index ? 'fa-circle' : 'fa-circle-o'}}"
                               ng-show="vm.currentIndex === $index" ng-if="!($first || $last)"></i>
                            <i class="fa fa-stack-lg fa-circle" ng-if="$first || $last"></i>
                            <i class="fa fa-stack-2x fa-circle-o" ng-show="vm.currentIndex === $index"></i>
                            <span class="fa fa-stack-1x step-index">{{!($first || $last) ? $index : ''}}</span>
                        </span><br>
                            <span class="step-title hidden-xs hidden-sm" ng-bind-html="step.title"></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel-body">
                <div class="row">

                    <div class="col-sm-12">

                        <form name="gateway-form">
                            <h4 class="text-center" ng-show="vm.currentIndex > 0">{{vm.gw.models.job.name}}</h4>

                            <div id="form-views" ui-view>
                                <div class="row oset-heading">
                                    <div class="col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2">
                                        <h3 class="text-center">{{vm.gw.models.company.name}} <br>
                                            <small>{{vm.gw.models.job.name}}</small>
                                        </h3>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-3 col-sm-offset-1 col-md-2 col-md-offset-2"
                                            ng-if="!!vm.gw.models.company.profileImageURL">
                                        <img class="img-responsive center-block"
                                             ng-src="{{vm.gw.models.company.profileImageURL}}"
                                             alt=""/>
                                        <br class="visible-xs">
                                    </div>
                                    <div class="col-sm-7 col-md-6">
                                        <p>
                                            {{vm.gw.models.company.name}} is pleased to see your interest in this job.
                                            As a part of the application process, we request that you fill out
                                            information about your past work experience, your licensing information, and
                                            fill out a pre-employment screen.
                                        </p>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2">
                                        <p class="text-center">
                                            The process has {{vm.activeSteps.length - 2}} steps, and begins once you
                                            click
                                            <em>next</em> below
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </form>

                    </div>
                </div>
            </div>

            <div class="panel-footer primary-bg">
                <div class="row" ng-hide="!!vm.applicationComplete">
                    <div class="col-xs-3 col-md-2">
                        <button ng-show="vm.currentIndex > 0" type="button" class="btn btn-oset-secondary"
                                ng-click="vm.goBack()" value="back">
                            <i class="fa fa-arrow-left"></i>
                            <span class="hidden-xs hidden-sm">back</span>
                        </button>
                    </div>
                    <div class="col-xs-6 col-md-8 text-center">
                        <div class="panel panel-info" ng-bind-html="vm.info" ng-show="!!vm.info"></div>
                        <div class="panel panel-success" ng-bind-html="vm.success"
                             ng-show="!!vm.success && false"></div>
                        <div class="panel panel-danger" ng-bind-html="vm.error"
                             ng-show="!!vm.error && false"></div>
                        &nbsp;
                    </div>
                    <div class="col-xs-3 col-md-2 text-right">
                        <button type="button" ng-hide="vm.currentStep.isLast" class="btn btn-oset-primary"
                                ng-click="vm.goNext()" value="next">
                            Next&nbsp;
                            <i class="fa fa-arrow-right"></i>
                        </button>
                        <button type="button" ng-show="vm.currentStep.isLast" class="btn btn-oset-primary"
                                ng-click="vm.submitApplication()" value="next">
                            Submit
                            <i class="fa fa-send mgn-left"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="panel-body" ng-if="vm.debug">
                <div class="row">

                    <div class="col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2">
                        <h3>Models: {{vm.getKeys(vm.gw.models)}}</h3>
                        <accordion>
                            <accordion-group ng-repeat="key in vm.getKeys(vm.gw.models)"
                                             heading="{{key | titleCase }} Model [{{vm.gw.models[key].id}}]">
                                <pre>{{vm.gw.models[key] | prettyPrint}}</pre>
                            </accordion-group>
                        </accordion>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
