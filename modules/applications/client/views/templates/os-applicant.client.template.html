<div class="applicant" name="os-applicant.client-template">
    <div class="h4 stronger">{{vm.applicant.displayName}}
        <small class="pull-right">Applied {{vm.application.created | date: 'short'}}</small>
    </div>
    <hr/>
    <div class="row">
        <div class="col-sm-12">
            <dl class="dl-horizontal">
                <dt> <img ng-src="{{vm.applicant.profileImageURL}}" class="img-responsive center-block"></dt>
                <dd>
                    <span class="strong">Cover Letter:</span>
                    <p class="panel panel-default letter" data-ng-bind-html="vm.application.introduction"></p>
                </dd>
                <dt>About:</dt>
                <dd ng-show="vm.isConnected">
                    <p class="panel panel-default letter" data-ng-bind-html="vm.driver.about"></p>
                </dd>
                <dd ng-hide="vm.isConnected">
                    <em class="text-muted" ng-bind-html="vm.text.pre.about"> </em>
                </dd>

                <dt>Messages:</dt>
                <dd ng-show="vm.isConnected">
                    <p ng-show="vm.application.messages && vm.application.messages.length">
                        {{vm.application.messages.length}} Total Messages
                        <a href="#messaging" class="pull-right" ng-click="vm.scrollToMessageFn()">
                            send a new message
                        </a>
                    </p>

                    <p class="panel panel-info letter"
                       ng-hide="vm.application.messages && vm.application.messages.length">
                        Now that you are connected, use the messaging functionality to communicate with the
                        {{vm.user.type === 'driver' ? 'Employer' : 'Applicant'}}.
                        You can ask and answer questions, and coordinate a telephone or in-person interview.
                        <br/>
                        <a href="#messaging" class="btn btn-primary"
                           ng-click="vm.scrollToMessageFn()">
                            Click Here to Begin
                        </a>
                    </p>
                </dd>
                <dd ng-hide="vm.isConnected">
                    <p>
                        <em class="text-muted" ng-if="vm.user.type === 'owner'"
                            ng-bind-html="vm.text.pre.messaging.owner"></em>
                        <em class="text-muted" ng-if="vm.user.type === 'driver'"
                            ng-bind-html="vm.text.pre.messaging.driver"></em>
                    </p>
                </dd>

                <dt>License:</dt>
                <dd>
                    <p>
                        <i class="fa fa-credit-card"></i> &nbsp;{{vm.license.state.name}}
                    <span ng-show="vm.license.type">
                        <span ng-if="vm.license.rating"> Class {{vm.license.rating | uppercase }}</span>
                        {{vm.license.type}}
                    </span>
                        Driver License
                    </p>
                </dd>

                <dt>Endorsements</dt>
                <dd>
                    <p>
                        <oset-list-endorsements model="vm.license.endorsements"></oset-list-endorsements>
                    </p>
                </dd>

                <dt>raw</dt>
                <dd><pre>{{vm.driver.reports | prettyPrint}}</pre></dd>
                <dt>Reports</dt>
                <dd class="report-badges" ng-class="{'not-visible':!vm.isConnected}">

                <span class="fa-stack fa-3x report-badge mgn-right"
                      tooltip="Resume{{vm.isConnected ? (!!vm.driver.resume ? ' - click to download': ' - not available') : ''}}"
                        ng-class="{'available': !!vm.driver.resume}"
                        ng-click="vm.isConnected && vm.openResumeFile()">
                    <i class="fa fa-file fa-stack-2x"></i>
                    <span class="badge-info">
                        <span class="badge-info-inner fa fa-stack-1x">
                            <i class="fa fa-check fa-1x"></i>
                            <span class="title">Resume</span>
                        </span>
                    </span>
                </span>

                <span class="fa-stack fa-3x report-badge mgn-right"
                      tooltip="Motor Vehicle Report{{vm.isConnected ? (!!vm.driver.reports['mvr']  ? ' - click to download': ' - not available') : ''}}"
                      ng-class="{'available': !!vm.driver.reports['mvr']}"
                      ng-click="vm.isConnected && vm.openReport('mvr')">
                    <i class="fa fa-certificate fa-stack-2x"></i>
                    <span class="badge-info">
                        <span class="badge-info-inner fa fa-stack-1x">
                            <i class="fa fa-check fa-1x hidden"></i>
                            <span class="title">MVR</span>
                        </span>
                    </span>
                </span>

                <span class="fa-stack fa-3x report-badge mgn-right"
                      tooltip="Background Check{{vm.isConnected ? (!!vm.driver.reports['bgcheck']  ? ' - click to download': ' - not available') : ''}}"
                      ng-class="{'available': !!vm.driver.reports['bgcheck']}"
                      ng-click="vm.isConnected && vm.openReport('bgcheck')">
                    <i class="fa fa-certificate fa-stack-2x"></i>
                    <span class="badge-info">
                        <span class="badge-info-inner fa fa-stack-1x">
                        <i class="fa fa-times fa-1x hidden"></i>
                        <span class="title">BG</span>
                    </span>
                    </span>
                </span>

                <span class="fa-stack fa-3x report-badge mgn-right"
                      tooltip="National Criminal{{vm.isConnected ? (!!vm.driver.reports['ncrim']  ? ' - click to download': ' - not available') : ''}}"
                      ng-class="{'available': !!vm.driver.reports['ncrim']}"
                      ng-click="vm.isConnected && vm.openReport('ncrim')">
                    <i class="fa fa-certificate fa-stack-2x"></i>
                    <span class="badge-info">
                        <span class="badge-info-inner fa fa-stack-1x">
                        <i class="fa fa-question fa-1x hidden"></i>
                        <span class="title">N-CRIM</span>
                    </span>
                    </span>
                </span>

                <span class="fa-stack fa-3x report-badge mgn-right"
                      tooltip="Drug Screen{{vm.isConnected ? (!!vm.driver.reports['drugs'] ? ' - click to download': ' - not available') : ''}}"
                      ng-class="{'available': !!vm.driver.reports['drugs']}"
                      ng-click="vm.isConnected && vm.openReport('drugs')">
                    <i class="fa fa-certificate fa-stack-2x"></i>
                    <span class="badge-info">
                        <span class="badge-info-inner fa fa-stack-1x">
                        <i class="fa fa-question fa-1x hidden"></i>
                        <span class="title">DRUG</span>
                    </span>
                    </span>
                </span>


                </dd>
                <dd ng-hide="vm.isConnected">
                    <em class="text-muted">
                        <span ng-hide="vm.driver.reports.length || !!vm.driver.resume">No reports on file</span>
                        <span ng-show="vm.driver.reports.length || !!vm.driver.resume">You will be able to download reports once connected</span>
                    </em>
                </dd>
                <dd ng-show="vm.isConnected">
                    <em class="text-muted">
                        <span ng-hide="vm.driver.reports.length || !!vm.driver.resume">No reports on file</span>
                        <span ng-show="vm.driver.reports.length || !!vm.driver.resume">Click on available reports to view or download</span>

                    </em>
                </dd>

                <dt>Interests</dt>
                <dd><p>
                    <span ng-repeat="interest in visibleInterests = (vm.driver.interests | filter: {value: true})"
                          class="label label-primary mgn-right">{{interest.key}}&nbsp;</span></span>

                    <span ng-show="!visibleInterests.length">
                        <span ng-show="!vm.canEdit">The applicant has not yet entered any job type preferences or interests.</span>
                    </span>
                    </p>
                </dd>

                <dt ng-init="vm.expCt=4">
                    Experience
                    <br ng-show="vm.isConnected"/>
                    <span ng-show="vm.isConnected && vm.driver.experience.length"
                          ng-switch="!vm.expCt && !!vm.driver.experience.length">
                        <button type="button" class="btn btn-oset-link"
                                ng-click="vm.expCt = 0;" ng-switch-when="false">
                            hide
                        </button>
                        <button type="button" class="btn btn-oset-link"
                                ng-click="vm.expCt = 4;" ng-switch-when="true">
                            show
                        </button>
                    </span>
                </dt>
                <dd ng-show="vm.isConnected">
                    <div class="panel-body" ng-switch="!!(vm.driver.experience.length)">
                        <oset-experience-list ng-switch-when="true"
                                              list="vm.driver.experience" view-only="true" max-ct="vm.expCt">

                        </oset-experience-list>

                        <p class="text-center" ng-switch-default>None Added</p>
                    </div>
                </dd>
                <dd ng-hide="vm.isConnected"><em class="text-muted" ng-bind-html="vm.experienceText">
                    experience will be available once you have connected</em>
                </dd>
            </dl>
        </div>
    </div>
</div>
