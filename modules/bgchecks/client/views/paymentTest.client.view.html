<section class="content-section">
    <h3 class="title container text-center">Enter Payment Information</h3>

    <div class="content-container container text-center">
        <div class="content-container-inner">
            <div class="about">
                <div class="container-fluid row">

                    <div class="col-xs-12 text-center">
                        <h4>Order Details</h4>
                        <br/>
                    </div>
                    <div class="col-sm-3" ng-if="!!vm.logo">
                        <img class="img-responsive" src="./modules/bgchecks/img/everifile_logo.png">
                    </div>
                    <div class="col-xs-12"
                         ng-class="{'col-sm-7 col-sm-offset-1':!!vm.logo, 'col-sm-10 col-sm-offset-1': !vm.logo}">
                        <div class="row">
                            <div class="col-sm-10">
                                <span ng-if="!vm.logo" class="strong">{{::(vm.report.title || vm.report.name)}} </span>
                                <span ng-class="{'text-muted': !vm.logo}">{{::vm.report.description}}</span>
                            </div>
                            <div class="col-sm-2 text-right">
                                {{::vm.getPriceString(vm.price)}}
                                <small ng-if="vm.report.recurring && vm.report.monthly" class="text-muted">
                                    <br/>per month
                                </small>
                            </div>
                        </div>
                    </div>

                    <div class="col-xs-12"
                         ng-class="{'col-sm-7 col-sm-offset-1':!!vm.logo, 'col-sm-10 col-sm-offset-1': !vm.logo}"
                         ng-show="!!vm.promoItem">
                        <div class="row">
                            <div class="col-sm-10">
                                <span ng-if="!vm.logo" class="strong">{{::(vm.promoItem.name)}} </span>
                                <span ng-class="{'text-muted': !vm.logo}">{{::vm.promoItem.description}}</span>
                            </div>
                            <div class="col-sm-2 text-right">
                                - {{vm.promoItem.priceString}}
                            </div>
                        </div>
                    </div>

                    <div class="col-xs-12" ng-show="!!vm.subtotalString || !!vm.report.promos"
                         ng-class="{'col-sm-7 col-sm-offset-1':!!vm.logo, 'col-sm-10 col-sm-offset-1': !vm.logo}">
                        <div class="row">
                            <hr class="col-sm-12"/>
                            <div class="col-sm-6 form-group form-inline">
                                <div class="input-group" ng-show="!!vm.report.promos">
                                    <input type="text" class="form-control" placeholder="Promo Code"
                                           ng-model="vm.promoCode">
                                    <span class="input-group-btn">
                                        <button class="btn btn-oset-secondary form-control" type="button"
                                                ng-class="{'disabled': !vm.promoCode || vm.promoCode === vm.promoItem.id}" ng-click="vm.applyPromo()">Apply
                                        </button>
                                    </span>
                                </div>
                                <span ng-show="vm.promoError"><br><span class="text-danger text-center">{{vm.promoError}}</span></span>
                            </div>
                            <div class="col-sm-4 text-right text-muted" ng-show="!!vm.subtotalString">
                                subtotal:
                            </div>
                            <div class="col-sm-2 text-right" ng-show="!!vm.subtotalString">
                                {{vm.subtotalString}}
                            </div>
                        </div>
                    </div>
                </div>

                <hr>
                <div class="row" ng-if="!!vm.report.promos">
                    <div class="col-sm-10 col-sm-offset-1 text-right ">

                    </div>
                </div>

                <div class="container-fluid row" ng-hide="vm.success" class="payment-form"
                     ng-class="{'disabled':vm.processing}">
                    <form id="paymentAuthForm" name="vm.paymentAuthForm" method="POST" action="/api/payments/create/">
                        <div class="well col-xs-12 col-md-offset-2 col-md-8">
                            <h4>Payment Information
                                <small class="mgn-left">Please enter your credit card information</small>
                            </h4>

                            <div id="dropin" class="dropin"></div>

                            <div class="row">
                                <button type="submit" class="btn btn-cta btn-cta-primary center-block mgn-top"
                                        ng-class="{'disabled': vm.paymentAuthForm.$submitted || vm.processing}">
                                    <i class="fa fa-lock"></i>&nbsp;Place Order
                                </button>
                            </div>
                            <div class="row text-center">
                                <br>
                                <a href="https://www.braintreegateway.com/merchants/YOUR_MERCHANT_ID/verified"
                                   target="_blank" class="center-block">
                                    <img src="https://braintree-badges.s3.amazonaws.com/07.png" class="" border="0"/>
                                </a>
                            </div>

                        </div>
                    </form>
                </div>

                <div class="container-fluid row" ng-show="vm.error">

                    <div class="col-xs-12 col-md-offset-2 col-md-8 text-danger text-center">
                        <h4>Sorry, an error occurred processing the transaction.</h4>

                        <p>{{vm.error}}</p>
                        <hr>
                    </div>
                </div>


                <div class="container-fluid row" ng-show="vm.success">

                    <div class="col-xs-12 col-md-offset-2 col-md-8">
                        <h4 class="text-center">Order Complete!</h4>

                        <p>{{vm.success}}</p>
                        <br>

                        <button type="submit" class="btn btn-cta btn-cta-secondary center-block" ui-sref="home">
                            Return Home...
                        </button>
                        <hr>
                    </div>
                </div>
            </div>
        </div>
    </div>

</section>
