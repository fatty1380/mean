<section class="container-fluid">
    <os-page-header title="{{vm.job.name}}" edit-sref="jobs.edit({jobId: '{{vm.job._id}}'})"
                    show-edit="vm.enableEdit">
        Posted on
        <span data-ng-bind="vm.job.created | date:'mediumDate'"></span> by
        <span data-ng-bind="vm.job.user.displayName"></span>
    </os-page-header>

    <div class="row">
        <div class="col-md-8">
            <os-job job="vm.job"></os-job>
        </div>

        <div class="col-md-4">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <span class="h4">Location: {{ vm.job.location[0].zipCode }}</span>
                </div>
                <div class="panel-body">
                    <os-map-location data-ng-if="vm.job.location[0]"
                                     zip-code="{{vm.job.location[0].zipCode}}"></os-map-location>
                    <div class="text-center" data-ng-hide="vm.job.location[0]">No Location Available</div>
                </div>
            </div>

            <div class="panel panel-default " data-ng-controller="ApplicationsController"
                 data-ng-init="initJobList(vm.job) ">
                <div class="panel-heading ">
                    <span class="h4">{{listTitle}} ({{applications.length}})</span>
                </div>
                <div class="panel-body ">
                    <div data-ng-if="vm.user.type === 'driver'" data-ng-hide="applications.length > 0">
                        <button class="btn btn-primary btn-lg btn-block" os-new-application-modal job='vm.job'>
                            apply now!
                        </button>
                    </div>

                    <div ng-if="vm.user.type === 'driver'" data-ng-show="applications.length > 0">
                        <os-view-application display-mode="minimal" model="applications[0]"></os-view-application>
                    </div>


                    <div ng-if="authentication.user._id == vm.job.user._id" data-ng-show="applications.length> 0"
                        class="row ">
                        <span class="col-md-12 ">
                            <div ng-include=" '/modules/applications/views/templates/list-applications.client.template.html' ">
                            </div>
                        </span>
                    </div>
                </div>
            </div>

            <div class="panel panel-default ">
                <div class="panel-heading ">
                    <span class="h4">Info</span>
                </div>
                <div class="panel-body ">
                    <div class="row" ng-if="vm.job.positionType">
                            <span class="fa-stack fa-lg pull-left ">
                                <i class="fa fa-circle fa-stack-2x "></i>
                                <i class="fa fa-clock-o fa-stack-1x fa-inverse "></i>
                            </span>
                        <span>{{ vm.job.positionType || "Part-Time Employment " }}</span>
                        <br>
                    </div>

                    <div class="row" ng-if="vm.job.payRate && (vm.job.payRate.min || vm.job.payRate.max)">
                            <span class="fa-stack fa-lg pull-left ">
                                <i class="fa fa-circle fa-stack-2x "></i>
                                <i class="fa fa-usd fa-stack-1x fa-inverse "></i>
                            </span>
                            <span>
                                ${{ vm.job.payRate.min }} to ${{ vm.job.payRate.max }} per Hour</span>
                        <br>
                    </div>

                    <div class="row" ng-if="vm.job.endorsements">
                            <span class="fa-stack fa-lg pull-left ">
                                <i class="fa fa-circle fa-stack-2x "></i>
                                <i class="fa fa-credit-card fa-stack-1x fa-inverse "></i>
                            </span>
                        <span>{{ vm.job.endorsements }}</span>
                    </div>
                </div>
            </div>


        </div>

    </div>
</section>
