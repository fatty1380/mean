<section class="container-fluid" ng-form="vm.profileUploadForm">
    <fieldset class="signin form-horizontal" ng-show="vm.initialized">

        <!--Section 1: Base State - Nothing Uploaded, nothing active -->
        <div class="form-group text-center mgn-vert" ng-hide="vm.newImage || vm.uploader.queue.length">
            <img data-ng-show="!!vm.imageURL" data-ng-src="{{vm.imageURL}}"
                 alt="{{vm.title}}" class="img-thumbnail user-profile-picture ng-hide">

            <div data-ng-hide="!!vm.imageURL" class="report-badges uploader mgn-vert">
                    <span class="fa-stack fa-3x report-badge">
                        <i class="fa fa-user fa-stack-2x"></i>
                        <i class="fa fa-question fa-1x"></i>
                    </span>
            </div>

            <div class="text-center form-group mgn-top" data-ng-hide="vm.uploader.queue.length">
                    <span ng-show="false && !!vm.imageURL" class="btn {{vm.uploadBtnClass || 'btn-oset-link'}} btn-file"
                          ng-click="vm.startCrop()">
                        <!--Adjust Image Disabled due to imageURL != Image Object-->
                    </span>
                    <span class="btn {{vm.uploadBtnClass || 'btn-oset-secondary'}} btn-file">
                        {{vm.uploadBtnText || 'Select Image ...'}}
                        <input type="file" nv-file-select uploader="vm.uploader">
                    </span>
            </div>
        </div>

        <!--Section 2: Upload in Progress-->
        <div class="form-group tvm.newImage text-center mgn-vert"
             ng-show="(vm.newImage || vm.uploader.queue.length) && ( vm.autoCrop && !vm.isCropping || !vm.autoCrop )">
            <h4>Preview:</h4>

            <div>
                <img ng-src="{{vm.croppedImage}}" ng-show="vm.useCropped || vm.isCropping"
                     class="img-thumbnail user-profile-picture"/>
                <img ng-src="{{vm.newImage}}" ng-hide="vm.useCropped || vm.isCropping"
                     class="img-thumbnail user-profile-picture"/>

            </div>

            <div class="text-center form-group" data-ng-show="vm.uploader.queue.length && !vm.isCropping">
                <button type="button" class="btn btn-link" data-ng-click="vm.cancelUpload();">cancel</button>
                <button type="button" class="btn btn-oset-primary" data-ng-click="vm.startCrop()">
                    {{ vm.useCropped ? 'Adjust' : 'Crop'}} Image
                </button>
                <button type="button" class="btn btn-oset-primary" data-ng-click="vm.uploadProfilePicture();">Upload
                </button>
            </div>
        </div>

        <!--Section 3: Cropping in Progress-->
        <div class="form-group tvm.newImage mgn-vert" ng-show="vm.isCropping">
            <h4>Use the circle to select the best part of the image</h4>

            <div class="text-center form-group" data-ng-hide="vm.autoCrop">
                <button type="button" class="btn btn-link" data-ng-click="vm.cancelCrop()">cancel</button>
                <button type="button" class="btn btn-link" data-ng-click="vm.saveCrop();">Save</button>
            </div>

            <div class="form-group-text-center-mgn-vert">
                <div class="cropArea center-block" class="img-thumbnail user-profile-picture"
                     style="background: #E4E4E4;overflow: hidden; width:400px; height:300px;">
                    <img-crop image="vm.newImage" area-type="{{vm.shape}}"
                              result-image="vm.croppedImage"></img-crop>
                </div>
            </div>

            <div class="text-center form-group" data-ng-show="vm.autoCrop">
                <button type="button" class="btn btn-link" data-ng-click="vm.cancelCrop()">cancel</button>
                <button type="button" class="btn btn-oset-primary" data-ng-click="vm.saveCrop();">Save</button>
            </div>
        </div>

        <!--Section 4: Status Text for success or error-->
        <div data-ng-show="vm.success" class="text-center text-success">
            <strong>Profile Picture Changed Successfully</strong>
        </div>
        <div data-ng-show="vm.error" class="text-center text-danger">
            <strong data-ng-bind="vm.error"></strong>
        </div>
    </fieldset>
    <div ng-hide="vm.initialized" class="alert alert-danger" role="alert"><strong>Error!</strong> Unable to initialize
        the image uploader. Please try again later.
    </div>
</section>
